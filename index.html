<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cautio - Live Issue Tracker</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        * {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
        }
        
        .glass-morphism {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }
        
        .gradient-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .gradient-card-2 {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .gradient-card-3 {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .gradient-card-4 {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        
        .tab-active {
            background: linear-gradient(90deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(99, 102, 241, 0.4);
        }
        
        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .hover-lift:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.2);
        }
        
        .table-row-hover {
            transition: all 0.2s ease;
        }
        
        .table-row-hover:hover {
            background: linear-gradient(90deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%);
            transform: translateX(4px);
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-slide-up {
            animation: slideUp 0.5s ease-out forwards;
        }

        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #6366f1;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-white to-purple-50 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const CautioLiveTracker = () => {
            const [issues, setIssues] = useState([]);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);
            const [activeTab, setActiveTab] = useState('dashboard');
            const [searchTerm, setSearchTerm] = useState('');
            const [filterClient, setFilterClient] = useState('');
            const [filterAssignee, setFilterAssignee] = useState('');
            const [filterStatus, setFilterStatus] = useState('');
            const [lastUpdated, setLastUpdated] = useState(null);

            // Your Google Sheet ID
            const SHEET_ID = '1DzW-6Q7hTNn2hSJbEHOkSrbalOmbDIftdjw4I_PhEdA';
            const SHEET_NAME = 'Issues- Realtime';
            
            // Convert Google Sheets URL to CSV export URL
            const CSV_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:csv&sheet=${encodeURIComponent(SHEET_NAME)}`;

            // Function to calculate age in days
            const calculateAge = (raisedDate, resolvedDate) => {
                const raised = new Date(raisedDate);
                const resolved = resolvedDate && resolvedDate.trim() !== '' ? new Date(resolvedDate) : new Date();
                const diffTime = Math.abs(resolved - raised);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                return diffDays;
            };

            // Function to parse status
            const parseStatus = (resolvedValue, followUpDate) => {
                const resolved = (resolvedValue || '').toString().toLowerCase().trim();
                
                if (resolved === 'yes') {
                    return 'Resolved';
                }
                
                // If not resolved, check if on hold
                if (followUpDate && followUpDate.trim() !== '') {
                    return 'On Hold';
                }
                
                return 'Open';
            };

            // Fetch data from Google Sheets
            const fetchSheetData = async () => {
                try {
                    setLoading(true);
                    setError(null);

                    const response = await fetch(CSV_URL);
                    
                    if (!response.ok) {
                        throw new Error('Failed to fetch data from Google Sheets. Please ensure the sheet is publicly accessible.');
                    }

                    const csvText = await response.text();
                    
                    Papa.parse(csvText, {
                        header: true,
                        skipEmptyLines: true,
                        complete: (results) => {
                            const processedIssues = results.data.map((row, index) => {
                                const status = parseStatus(row['Resolved Y/N'], row['Next Follow Up Date']);
                                const age = calculateAge(
                                    row['Timestamp Issues raised'],
                                    row['Timestamp Issues Resolved']
                                );

                                return {
                                    id: index + 1,
                                    issueId: row['Issue ID'] || '',
                                    client: row['Clients'] || '',
                                    timestampRaised: row['Timestamp Issues raised'] || '',
                                    subRequest: row['Sub-request'] || '',
                                    issueDetails: row['Issue Details'] || '',
                                    jiraTicketId: row['JIRA ticket ID'] || '',
                                    vehicleNumber: row['Vehicle Number'] || '',
                                    raisedBy: row['Raised by'] || '',
                                    raisedVia: row['Raised via [Forum]'] || '',
                                    assignedTo: row['Assigned To'] || '',
                                    resolvedYN: row['Resolved Y/N'] || '',
                                    timestampResolved: row['Timestamp Issues Resolved'] || '',
                                    dateCurrentStatus: row['Date - Current Status'] || '',
                                    nextFollowUpDate: row['Next Follow Up Date'] || '',
                                    howCorrected: row['How was it corrected?'] || '',
                                    responsiblePerson: row['Responsible Person'] || '',
                                    days: row['Days'] || '',
                                    location: row['Location'] || '',
                                    area: row['Area'] || '',
                                    city: row['City'] || '',
                                    status: status,
                                    age: age
                                };
                            });

                            setIssues(processedIssues);
                            setLastUpdated(new Date());
                            setLoading(false);
                        },
                        error: (error) => {
                            throw new Error(`CSV parsing error: ${error.message}`);
                        }
                    });

                } catch (err) {
                    setError(err.message);
                    setLoading(false);
                    console.error('Error fetching data:', err);
                }
            };

            // Fetch data on component mount and set up auto-refresh
            useEffect(() => {
                fetchSheetData();
                
                // Auto-refresh every 5 minutes
                const interval = setInterval(fetchSheetData, 5 * 60 * 1000);
                
                return () => clearInterval(interval);
            }, []);

            // Filter and search logic
            const filteredIssues = useMemo(() => {
                return issues.filter(issue => {
                    const matchesSearch = searchTerm === '' || 
                        Object.values(issue).some(val => 
                            val.toString().toLowerCase().includes(searchTerm.toLowerCase())
                        );
                    
                    const matchesClient = filterClient === '' || issue.client === filterClient;
                    const matchesAssignee = filterAssignee === '' || issue.assignedTo === filterAssignee;
                    const matchesStatus = filterStatus === '' || issue.status === filterStatus;
                    
                    return matchesSearch && matchesClient && matchesAssignee && matchesStatus;
                });
            }, [issues, searchTerm, filterClient, filterAssignee, filterStatus]);

            // Get unique values for filters
            const uniqueClients = useMemo(() => [...new Set(issues.map(i => i.client).filter(Boolean))].sort(), [issues]);
            const uniqueAssignees = useMemo(() => [...new Set(issues.map(i => i.assignedTo).filter(Boolean))].sort(), [issues]);

            // Calculate statistics
            const stats = useMemo(() => {
                const total = filteredIssues.length;
                const open = filteredIssues.filter(i => i.status === 'Open').length;
                const resolved = filteredIssues.filter(i => i.status === 'Resolved').length;
                const onHold = filteredIssues.filter(i => i.status === 'On Hold').length;
                const avgAge = total > 0 ? Math.round(filteredIssues.reduce((sum, i) => sum + i.age, 0) / total) : 0;

                return { total, open, resolved, onHold, avgAge };
            }, [filteredIssues]);

            // Group by assignee
            const issuesByAssignee = useMemo(() => {
                const grouped = {};
                filteredIssues.forEach(issue => {
                    const assignee = issue.assignedTo || 'Unassigned';
                    if (!grouped[assignee]) {
                        grouped[assignee] = { total: 0, open: 0, resolved: 0, onHold: 0, issues: [] };
                    }
                    grouped[assignee].total++;
                    grouped[assignee].issues.push(issue);
                    if (issue.status === 'Open') grouped[assignee].open++;
                    if (issue.status === 'Resolved') grouped[assignee].resolved++;
                    if (issue.status === 'On Hold') grouped[assignee].onHold++;
                });
                return grouped;
            }, [filteredIssues]);

            // Group by client
            const issuesByClient = useMemo(() => {
                const grouped = {};
                filteredIssues.forEach(issue => {
                    const client = issue.client || 'Unknown';
                    if (!grouped[client]) {
                        grouped[client] = { total: 0, open: 0, resolved: 0, onHold: 0, issues: [] };
                    }
                    grouped[client].total++;
                    grouped[client].issues.push(issue);
                    if (issue.status === 'Open') grouped[client].open++;
                    if (issue.status === 'Resolved') grouped[client].resolved++;
                    if (issue.status === 'On Hold') grouped[client].onHold++;
                });
                return grouped;
            }, [filteredIssues]);

            // Group by location
            const issuesByLocation = useMemo(() => {
                const grouped = {};
                filteredIssues.forEach(issue => {
                    const location = issue.location || 'Unknown';
                    if (!grouped[location]) {
                        grouped[location] = { total: 0, open: 0, resolved: 0, onHold: 0, issues: [] };
                    }
                    grouped[location].total++;
                    grouped[location].issues.push(issue);
                    if (issue.status === 'Open') grouped[location].open++;
                    if (issue.status === 'Resolved') grouped[location].resolved++;
                    if (issue.status === 'On Hold') grouped[location].onHold++;
                });
                return grouped;
            }, [filteredIssues]);

            // Render Dashboard
            const renderDashboard = () => (
                <div className="space-y-6 animate-slide-up">
                    {/* Stats Cards */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6">
                        <div className="gradient-card rounded-xl p-6 text-white hover-lift">
                            <p className="text-sm font-medium opacity-90">Total Issues</p>
                            <p className="text-4xl font-bold mt-2">{stats.total}</p>
                        </div>
                        <div className="gradient-card-2 rounded-xl p-6 text-white hover-lift">
                            <p className="text-sm font-medium opacity-90">Open Issues</p>
                            <p className="text-4xl font-bold mt-2">{stats.open}</p>
                        </div>
                        <div className="gradient-card-4 rounded-xl p-6 text-white hover-lift">
                            <p className="text-sm font-medium opacity-90">Resolved</p>
                            <p className="text-4xl font-bold mt-2">{stats.resolved}</p>
                        </div>
                        <div className="gradient-card-3 rounded-xl p-6 text-white hover-lift">
                            <p className="text-sm font-medium opacity-90">On Hold</p>
                            <p className="text-4xl font-bold mt-2">{stats.onHold}</p>
                        </div>
                        <div className="bg-gradient-to-br from-orange-400 to-pink-500 rounded-xl p-6 text-white hover-lift">
                            <p className="text-sm font-medium opacity-90">Avg Age (Days)</p>
                            <p className="text-4xl font-bold mt-2">{stats.avgAge}</p>
                        </div>
                    </div>

                    {/* Issues Table */}
                    <div className="glass-morphism rounded-xl p-6">
                        <h2 className="text-2xl font-bold mb-4 text-gray-800">All Issues</h2>
                        <div className="overflow-x-auto">
                            <table className="w-full">
                                <thead>
                                    <tr className="border-b-2 border-indigo-200">
                                        <th className="text-left p-3 font-semibold text-gray-700">Issue ID</th>
                                        <th className="text-left p-3 font-semibold text-gray-700">Client</th>
                                        <th className="text-left p-3 font-semibold text-gray-700">Issue Type</th>
                                        <th className="text-left p-3 font-semibold text-gray-700">Vehicle No</th>
                                        <th className="text-left p-3 font-semibold text-gray-700">Assignee</th>
                                        <th className="text-left p-3 font-semibold text-gray-700">Status</th>
                                        <th className="text-left p-3 font-semibold text-gray-700">Age (Days)</th>
                                        <th className="text-left p-3 font-semibold text-gray-700">Location</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {filteredIssues.map(issue => (
                                        <tr key={issue.id} className="border-b border-gray-200 table-row-hover">
                                            <td className="p-3">{issue.issueId}</td>
                                            <td className="p-3">{issue.client}</td>
                                            <td className="p-3">{issue.subRequest}</td>
                                            <td className="p-3 font-mono text-sm">{issue.vehicleNumber}</td>
                                            <td className="p-3">{issue.assignedTo}</td>
                                            <td className="p-3">
                                                <span className={`px-3 py-1 rounded-full text-xs font-semibold ${
                                                    issue.status === 'Open' ? 'bg-red-100 text-red-700' :
                                                    issue.status === 'Resolved' ? 'bg-green-100 text-green-700' :
                                                    'bg-yellow-100 text-yellow-700'
                                                }`}>
                                                    {issue.status}
                                                </span>
                                            </td>
                                            <td className="p-3">{issue.age}</td>
                                            <td className="p-3">{issue.location}</td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            );

            // Render Assignee Tab
            const renderAssigneeTab = () => (
                <div className="space-y-6 animate-slide-up">
                    {Object.entries(issuesByAssignee).map(([assignee, data]) => (
                        <div key={assignee} className="glass-morphism rounded-xl p-6">
                            <div className="flex justify-between items-center mb-4">
                                <h2 className="text-2xl font-bold text-gray-800">üë§ {assignee}</h2>
                                <div className="flex gap-4">
                                    <span className="px-4 py-2 bg-purple-100 text-purple-700 rounded-lg font-semibold">
                                        Total: {data.total}
                                    </span>
                                    <span className="px-4 py-2 bg-red-100 text-red-700 rounded-lg font-semibold">
                                        Open: {data.open}
                                    </span>
                                    <span className="px-4 py-2 bg-green-100 text-green-700 rounded-lg font-semibold">
                                        Resolved: {data.resolved}
                                    </span>
                                    <span className="px-4 py-2 bg-yellow-100 text-yellow-700 rounded-lg font-semibold">
                                        Hold: {data.onHold}
                                    </span>
                                </div>
                            </div>
                            <div className="overflow-x-auto">
                                <table className="w-full">
                                    <thead>
                                        <tr className="border-b-2 border-indigo-200">
                                            <th className="text-left p-3 font-semibold text-gray-700">Issue ID</th>
                                            <th className="text-left p-3 font-semibold text-gray-700">Client</th>
                                            <th className="text-left p-3 font-semibold text-gray-700">Issue Type</th>
                                            <th className="text-left p-3 font-semibold text-gray-700">Vehicle No</th>
                                            <th className="text-left p-3 font-semibold text-gray-700">Status</th>
                                            <th className="text-left p-3 font-semibold text-gray-700">Age</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {data.issues.map(issue => (
                                            <tr key={issue.id} className="border-b border-gray-200 table-row-hover">
                                                <td className="p-3">{issue.issueId}</td>
                                                <td className="p-3">{issue.client}</td>
                                                <td className="p-3">{issue.subRequest}</td>
                                                <td className="p-3 font-mono text-sm">{issue.vehicleNumber}</td>
                                                <td className="p-3">
                                                    <span className={`px-3 py-1 rounded-full text-xs font-semibold ${
                                                        issue.status === 'Open' ? 'bg-red-100 text-red-700' :
                                                        issue.status === 'Resolved' ? 'bg-green-100 text-green-700' :
                                                        'bg-yellow-100 text-yellow-700'
                                                    }`}>
                                                        {issue.status}
                                                    </span>
                                                </td>
                                                <td className="p-3">{issue.age} days</td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    ))}
                </div>
            );

            // Render Client Tab
            const renderClientTab = () => (
                <div className="space-y-6 animate-slide-up">
                    {Object.entries(issuesByClient).map(([client, data]) => (
                        <div key={client} className="glass-morphism rounded-xl p-6">
                            <div className="flex justify-between items-center mb-4">
                                <h2 className="text-2xl font-bold text-gray-800">üè¢ {client}</h2>
                                <div className="flex gap-4">
                                    <span className="px-4 py-2 bg-purple-100 text-purple-700 rounded-lg font-semibold">
                                        Total: {data.total}
                                    </span>
                                    <span className="px-4 py-2 bg-red-100 text-red-700 rounded-lg font-semibold">
                                        Open: {data.open}
                                    </span>
                                    <span className="px-4 py-2 bg-green-100 text-green-700 rounded-lg font-semibold">
                                        Resolved: {data.resolved}
                                    </span>
                                    <span className="px-4 py-2 bg-yellow-100 text-yellow-700 rounded-lg font-semibold">
                                        Hold: {data.onHold}
                                    </span>
                                </div>
                            </div>
                            <div className="overflow-x-auto">
                                <table className="w-full">
                                    <thead>
                                        <tr className="border-b-2 border-indigo-200">
                                            <th className="text-left p-3 font-semibold text-gray-700">Issue ID</th>
                                            <th className="text-left p-3 font-semibold text-gray-700">Issue Type</th>
                                            <th className="text-left p-3 font-semibold text-gray-700">Vehicle No</th>
                                            <th className="text-left p-3 font-semibold text-gray-700">Assignee</th>
                                            <th className="text-left p-3 font-semibold text-gray-700">Status</th>
                                            <th className="text-left p-3 font-semibold text-gray-700">Age</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {data.issues.map(issue => (
                                            <tr key={issue.id} className="border-b border-gray-200 table-row-hover">
                                                <td className="p-3">{issue.issueId}</td>
                                                <td className="p-3">{issue.subRequest}</td>
                                                <td className="p-3 font-mono text-sm">{issue.vehicleNumber}</td>
                                                <td className="p-3">{issue.assignedTo}</td>
                                                <td className="p-3">
                                                    <span className={`px-3 py-1 rounded-full text-xs font-semibold ${
                                                        issue.status === 'Open' ? 'bg-red-100 text-red-700' :
                                                        issue.status === 'Resolved' ? 'bg-green-100 text-green-700' :
                                                        'bg-yellow-100 text-yellow-700'
                                                    }`}>
                                                        {issue.status}
                                                    </span>
                                                </td>
                                                <td className="p-3">{issue.age} days</td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    ))}
                </div>
            );

            // Render Location Tab
            const renderLocationTab = () => (
                <div className="space-y-6 animate-slide-up">
                    {Object.entries(issuesByLocation).map(([location, data]) => (
                        <div key={location} className="glass-morphism rounded-xl p-6">
                            <div className="flex justify-between items-center mb-4">
                                <h2 className="text-2xl font-bold text-gray-800">üìç {location}</h2>
                                <div className="flex gap-4">
                                    <span className="px-4 py-2 bg-purple-100 text-purple-700 rounded-lg font-semibold">
                                        Total: {data.total}
                                    </span>
                                    <span className="px-4 py-2 bg-red-100 text-red-700 rounded-lg font-semibold">
                                        Open: {data.open}
                                    </span>
                                    <span className="px-4 py-2 bg-green-100 text-green-700 rounded-lg font-semibold">
                                        Resolved: {data.resolved}
                                    </span>
                                    <span className="px-4 py-2 bg-yellow-100 text-yellow-700 rounded-lg font-semibold">
                                        Hold: {data.onHold}
                                    </span>
                                </div>
                            </div>
                            <div className="overflow-x-auto">
                                <table className="w-full">
                                    <thead>
                                        <tr className="border-b-2 border-indigo-200">
                                            <th className="text-left p-3 font-semibold text-gray-700">Issue ID</th>
                                            <th className="text-left p-3 font-semibold text-gray-700">Client</th>
                                            <th className="text-left p-3 font-semibold text-gray-700">Issue Type</th>
                                            <th className="text-left p-3 font-semibold text-gray-700">Vehicle No</th>
                                            <th className="text-left p-3 font-semibold text-gray-700">Assignee</th>
                                            <th className="text-left p-3 font-semibold text-gray-700">Status</th>
                                            <th className="text-left p-3 font-semibold text-gray-700">Age</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {data.issues.map(issue => (
                                            <tr key={issue.id} className="border-b border-gray-200 table-row-hover">
                                                <td className="p-3">{issue.issueId}</td>
                                                <td className="p-3">{issue.client}</td>
                                                <td className="p-3">{issue.subRequest}</td>
                                                <td className="p-3 font-mono text-sm">{issue.vehicleNumber}</td>
                                                <td className="p-3">{issue.assignedTo}</td>
                                                <td className="p-3">
                                                    <span className={`px-3 py-1 rounded-full text-xs font-semibold ${
                                                        issue.status === 'Open' ? 'bg-red-100 text-red-700' :
                                                        issue.status === 'Resolved' ? 'bg-green-100 text-green-700' :
                                                        'bg-yellow-100 text-yellow-700'
                                                    }`}>
                                                        {issue.status}
                                                    </span>
                                                </td>
                                                <td className="p-3">{issue.age} days</td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    ))}
                </div>
            );

            if (loading) {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen">
                        <div className="loading-spinner"></div>
                        <p className="mt-4 text-xl font-semibold text-gray-700">Loading data from Google Sheets...</p>
                    </div>
                );
            }

            if (error) {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen p-8">
                        <div className="bg-red-100 border-l-4 border-red-500 text-red-700 p-6 rounded-lg max-w-2xl">
                            <h2 className="text-2xl font-bold mb-2">‚ö†Ô∏è Error Loading Data</h2>
                            <p className="mb-4">{error}</p>
                            <div className="bg-white p-4 rounded mt-4">
                                <p className="font-semibold mb-2">Please ensure:</p>
                                <ul className="list-disc list-inside space-y-1 text-sm">
                                    <li>The Google Sheet is set to "Anyone with the link can view"</li>
                                    <li>The sheet ID is correct: 1DzW-6Q7hTNn2hSJbEHOkSrbalOmbDIftdjw4I_PhEdA</li>
                                    <li>The tab name is exactly: "Issues- Realtime"</li>
                                </ul>
                            </div>
                            <button 
                                onClick={fetchSheetData}
                                className="mt-4 px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition"
                            >
                                Retry
                            </button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen">
                    {/* Header */}
                    <header className="bg-white shadow-lg border-b-4 border-indigo-500">
                        <div className="container mx-auto px-6 py-6">
                            <div className="glass-morphism rounded-2xl p-6">
                                <div className="flex justify-between items-center">
                                    <div>
                                        <h1 className="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600">
                                            CAUTIO
                                        </h1>
                                        <p className="text-sm text-gray-600 mt-1">Live Issue Tracking System</p>
                                        {lastUpdated && (
                                            <p className="text-xs text-gray-500 mt-1">
                                                Last updated: {lastUpdated.toLocaleString()}
                                            </p>
                                        )}
                                    </div>
                                    <div className="text-right">
                                        <button
                                            onClick={fetchSheetData}
                                            className="px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition mb-2"
                                        >
                                            üîÑ Refresh Data
                                        </button>
                                        <p className="text-xs text-gray-500">
                                            Auto-refresh: Every 5 minutes
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* Navigation Tabs */}
                    <div className="bg-white shadow-sm sticky top-0 z-10 border-b border-gray-200">
                        <div className="container mx-auto px-6">
                            <div className="flex gap-2 py-4">
                                {['dashboard', 'assignee', 'client', 'location'].map(tab => (
                                    <button
                                        key={tab}
                                        onClick={() => setActiveTab(tab)}
                                        className={`px-6 py-3 rounded-lg font-semibold transition-all duration-300 ${
                                            activeTab === tab 
                                                ? 'tab-active' 
                                                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                        }`}
                                    >
                                        {tab === 'dashboard' && 'üìä '}
                                        {tab === 'assignee' && 'üë• '}
                                        {tab === 'client' && 'üè¢ '}
                                        {tab === 'location' && 'üìç '}
                                        {tab.charAt(0).toUpperCase() + tab.slice(1)}
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Filters */}
                    <div className="container mx-auto px-6 py-4">
                        <div className="glass-morphism rounded-lg p-4">
                            <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div>
                                    <label className="text-sm font-semibold text-gray-700 mb-2 block">üîç Search</label>
                                    <input
                                        type="text"
                                        placeholder="Search issues..."
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                        className="w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                    />
                                </div>
                                <div>
                                    <label className="text-sm font-semibold text-gray-700 mb-2 block">üè¢ Client</label>
                                    <select
                                        value={filterClient}
                                        onChange={(e) => setFilterClient(e.target.value)}
                                        className="w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                    >
                                        <option value="">All Clients</option>
                                        {uniqueClients.map(client => (
                                            <option key={client} value={client}>{client}</option>
                                        ))}
                                    </select>
                                </div>
                                <div>
                                    <label className="text-sm font-semibold text-gray-700 mb-2 block">üë§ Assignee</label>
                                    <select
                                        value={filterAssignee}
                                        onChange={(e) => setFilterAssignee(e.target.value)}
                                        className="w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                    >
                                        <option value="">All Assignees</option>
                                        {uniqueAssignees.map(assignee => (
                                            <option key={assignee} value={assignee}>{assignee}</option>
                                        ))}
                                    </select>
                                </div>
                                <div>
                                    <label className="text-sm font-semibold text-gray-700 mb-2 block">üìå Status</label>
                                    <select
                                        value={filterStatus}
                                        onChange={(e) => setFilterStatus(e.target.value)}
                                        className="w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                    >
                                        <option value="">All Status</option>
                                        <option value="Open">Open</option>
                                        <option value="Resolved">Resolved</option>
                                        <option value="On Hold">On Hold</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className="container mx-auto px-6 pb-8">
                        {activeTab === 'dashboard' && renderDashboard()}
                        {activeTab === 'assignee' && renderAssigneeTab()}
                        {activeTab === 'client' && renderClientTab()}
                        {activeTab === 'location' && renderLocationTab()}
                    </div>

                    {/* Footer */}
                    <footer className="bg-gray-900 text-white py-6 mt-12">
                        <div className="container mx-auto px-6 text-center">
                            <p className="text-sm">¬© 2024 Cautio Live Issue Tracking System | Connected to Google Sheets</p>
                        </div>
                    </footer>
                </div>
            );
        };

        // Render the app
        ReactDOM.render(<CautioLiveTracker />, document.getElementById('root'));
    </script>
</body>
</html>
